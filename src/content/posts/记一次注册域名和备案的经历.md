---
published: 2025-10-23
title: 记一次注册域名和备案的经历
description: 第一次备案，经验不足出了很多问题。
sourceLink: https://locxl.site/posts/记一次注册域名和备案的经历/
licenseName: "CC BY-SA 4.0"
tags: [记录]
category: 记录
author: Locxl
---
# 前言
因为搭建了一个blog，所以自然想要有一个域名，毕竟没人喜欢记一串数字 ~~（不会真的有人喜欢吧）~~

---

# 注册域名

## 购买域名
注册域名首先自然是选一个**域名提供商**，我在这里选择的是**腾讯云**，locxl.site首年只需要10元，而且不得不说腾讯的域名还是很多的，其他像是cloudfare什么的要么后缀不是很满意，要么价格太贵，最后还是选择了腾讯云的locxl.site。
## 域名解析
（这一步可以放到备案之后做，因为**备案前是要求不能域名解析的**，解析了也会被封禁，当然，备案仅限内地，建议大家遵循相关规定）
有了域名自然要将它解析到自己的网站，在腾讯云里直接选择域名解析，选择新手快速解析就行了，当然你需要一台服务器和公网IP ~~（不会有人买了域名却没有公网IP吧？）~~ ，填入对应的IP，然后确定，等个几分钟，DNS服务器应该就同步数据了。

---

# SSL证书

## 申请
证书我同样选择的腾讯云的服务，免费的有效期3个月（白嫖就是好），证书申请表单中证书绑定域名自然就是刚刚购买的域名，验证方式我这里选择的是手动DNS验证（当然你可以自动，虽然我没试过，但应该也是可以的），算法默认RSA算法。
## DNS验证（手动）[^1]
### 1.查看验证信息
1. 登录SSL证书控制台，点击查看验证。
2. 在验证域名页面，获取主机记录和记录值。
### 2.添加解析记录

> **注意**:以下操作仅针对域名对应的域名解析商在腾讯云的情况下，若不在腾讯云，请您到域名对应的**域名解析商**处进行解析。域名解析商查询可通过 [DNS.TECH 域名检测](https://dns.tech/ "https://dns.tech/")。

1. 在验证域名页面，获取**主机记录**以及**记录值**。
2. 登录 云解析 DNS 控制台 ，查看已申请证书的域名，并单击操作栏的**解析**，进入**记录管理**页面。
3. 单击**添加记录**，并根据不同证书类型添加 DNS 记录。

   >**说明:** DNS 记录仅支持 CNAME 及 TXT 记录类型，且不同记录类型适用不同的品牌证书，请结合实际情形进行选择。

   **主机记录**：查看验证信息中的主机记录值。
   **记录类型**：选择 "CNAME"或"TXT"（DNSPod、Wotrus为CHAME，TrustAsia 、GlobalSign、Geotrust、SecureSite为TXT）
   **线路类型**：选择 “默认” 类型，否则会导致 CA 机构无法进行扫描认证。
   **记录值**：查看验证信息中的记录值。
   **MX 优先级**：不需要填写。
   **TTL**：为缓存时间，数值越小，修改记录各地生效时间越快，默认为600秒。
4. 单击**保存**，完成添加。添加成功后，证书对应域名添加记录值的系统会定时检查，若 CA 机构能检测到并且与指定的值匹配，即可完成域名所有权验证，请耐心等待 CA 机构扫描审核。
## 部署（Nginx）
由于我web服务器使用的**Nginx（Linux）**，所以只介绍部署到Nginx的方法 ~~（其他的我也不会就是了）~~
1. 将证书文件（**yourdomain_bundle.crt**）和私钥（**yourdomain.key**）上传到服务器（例如 /etc/nginx/cert）。
2. 在 **443 端口的 server 块**启用：

   >**大概率**你的nginx配置文件在 **/etc/nginx/nginx.conf**（具体可以通过执行**nginx -V**命令查看 **--conf-path**）,但它**通常不含有**server块，而是通过include /etc/nginx/conf.d/\*.conf; **导入/etc/nginx/conf.d下的所有配置文件**，通常你实际需要修改的是/etc/nginx/conf.d/default.conf

   添加如下代码
   ```conf
   server {
   
     # 监听 TCP 443 端口；ssl 表示该端口启用 TLS 终止。
     listen 443 ssl; 
     
     # 指定此 server 块匹配的主机名。填写你的域名
     server_name yourdomain; 
     
     # 你的服务器证书文件路径（绝对或相对路径），通常应为“完整链”（full chain / bundle）
     ssl_certificate /.../yourdomain_bundle.pem; 
     
     # 对应证书的私钥文件路径（（绝对或相对路径）。注意权限应限制（例如 600）并属于 nginx 运行用户或 root，以防泄露
     ssl_certificate_key locxl.site.key; 
     
     # ...省略其他配置
     
     }
   ```

3. （可选）把所有请求 301 永久**重定向**到对应的 HTTPS URL
   在default.conf添加如下代码
   ```conf
   server {
   
     # 监听 TCP 443 端口
     listen 80;
     
     # 指定此 server 块匹配的主机名。填写你的域名
     server_name yourdomian; 
     
     # 把所有请求永久重定向到相同主机和路径的 HTTPS
     return 301 https://$host$request_uri; 
     
     }
     ```

---

# 备案
## 第一次备案
### 准备
由于我的服务器是**华为云**的,所以我自然是选择在华为云备案，你需要准备以下材料：
1. 身份证
2. 一个手机（用来身份验证）
3. 你的网站名
4. 你的网站主要用途
5. 你的域名证书（在域名服务商那里下载）
6. 手机号码，应急号码，邮箱
### 注意:
1. 网站名不要出现名字、论坛、乡村、地名、游戏、站（web）、博客（blog、vlog）、网站、英文等字眼
2. 未备案的域名需要关闭解析
3. 网站备注要详细
4. 域名实名认证信息要同步，刚注册的域名实名认证同步工信部系统一般需要3-5个工作日

>由于以上问题没有注意到，我的第一次备案以**失败告终**

## 第二次备案
注意到上次的问题，成功了，就是等的时间有点久，大概两周
呵呵，并没有这么简单，我还要登录“[全国互联网安全管理服务平台](https://beian.mps.gov.cn/#/)”进行公安备案
首先，你需要申请一个主体，然后申请新建网站，我还要进行安全评估。具体的话可以看
[网站备案指引](https://beian.mps.gov.cn/b4f5d96b-7008-45f5-85ba-a35e4a56a22c)

好吧，还没完，交互式网站还要当面审核（至少在我这个地区是这样的），而且是很严的。

至少要满足以下几点要求：
- 用户注册要实名（例如上传手持身份证照片）使用户的行为能溯源
- 用户的言论要审核（人工审核或机器审核）
- 用户的数据要保护好，防止被他人窃取
除此以外，还要建立投诉机制等，具体见[互联网交互式服务安全管理要求](https://std.samr.gov.cn/hb/search/stdHBDetailed?id=A71509B94372821BE05397BE0A0AE812)

所以我建议个人博客就不要有评论系统了，麻烦而且要担责，当然如果一定要的话记得要合法

最后，就是网站要添加工信部备案和公安局备案的标注，然后就大功告成了。

[^1]: [SSL 证书 DNS 验证_腾讯云](https://cloud.tencent.com/document/product/400/54500)
